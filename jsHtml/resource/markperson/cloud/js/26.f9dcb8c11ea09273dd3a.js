webpackJsonp([26],{"G+27":function(e,t){},qUNE:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("4syG"),r=a("C6kd"),s=a("T+uA"),i=a("2hMI"),l={name:"alarm_log",components:{separator:n.a},data:function(){return{searchobj:{},tableData:[],tableDataLabel:null,searchConfig:null,netAPI:null,pageSize:5,total:0,currentPage:1,tabel:1,multipleSelection:[],batchdisabled:!0,tableBoxLoading:!1,getRowKeys:function(e){return e.id}}},created:function(){this.netAPI=Object(i.a)().get("alarm_log"),this.searchtabledata(),console.log(this.$route.params.num)},mounted:function(){this.tableDataLabel=r.a.get("alarm_log"),this.searchConfig=s.a.get("alarm_log"),this.getOptions()},computed:{searchconfig:function(){return[{name:this.$t("alarmCenter.level"),property:"eventLevel",type:"select",width:"140",options:[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"}]},{name:this.$t("alarmCenter.type"),property:"eventName",type:"input",width:"120"},{name:this.$t("alarmCenter.time"),property:"eventTime",type:"date",width:"100"}]},tableConfig:function(){return[{name:this.$t("alarmCenter.event"),property:"eventName",width:80,type:"input",required:!0},{name:this.$t("alarmCenter.level"),property:"eventLevel",width:80,type:"input",required:!0},{name:this.$t("alarmCenter.detail"),property:"eventDetail",width:80,type:"input",required:!0},{name:this.$t("alarmCenter.time"),property:"eventTime",width:80,type:"input",required:!0}]}},methods:{filterselectable:function(e,t){return this.$route.meta.remove?1:0},searchtabledata:function(e,t){var a=this;this.tableBoxLoading=!0,"search"===t&&(this.currentPage=1),this.searchobj.eventTime?(this.searchobj.startDate=this.formatDate(this.searchobj.eventTime[0]),this.searchobj.endDate=this.formatDate(this.searchobj.eventTime[1])):(delete this.searchobj.eventTime,delete this.searchobj.startDate,delete this.searchobj.endDate),"tabClick"!==e?void 0==this.$route.params.num?this.searchobj.eventSource=this.tabel:(this.tabel=this.$route.params.num,this.searchobj.eventSource=this.tabel):this.searchobj.eventSource=this.tabel,this.searchobj.pageSize=this.pageSize,this.searchobj.pageNo=this.currentPage,this.$http.get(this.netAPI.findByCondition,{params:this.searchobj}).then(function(e){200==e.body.status?(a.parseData(e),a.tableBoxLoading=!1):a.$http.warning(e.body.message)},function(e){a.$http.warning(a.$t("common.serviceError")+e)})},getOptions:function(){},handleSelectionChange:function(e){e.length>0?(this.$refs.batchremove.$el.style.color="black",this.batchdisabled=!1):(this.$refs.batchremove.$el.style.color="#BABABA",this.batchdisabled=!0),this.multipleSelection=e},handleSizeChange:function(e){this.pageSize=e,this.searchtabledata("tabClick")},handleCurrentChange:function(e){this.currentPage=e,this.searchtabledata("tabClick")},formatDate:function(e){var t=e.getFullYear(),a=e.getMonth()+1;a=a<10?"0"+a:a;var n=e.getDate();return t+"-"+a+"-"+(n=n<10?"0"+n:n)},parseData:function(e){this.tableData=[],this.tableData=e.body.data,this.total=e.body.total},end_warning:function(e){this.tabel=e,this.currentPage=1,this.searchobj={},this.searchtabledata("tabClick")},deleteRow:function(e){var t=this,a=[];if(e){if(1==e instanceof Array)for(var n in e)a.push({id:e[n].id});else a.push({id:e.id});this.$confirm(this.$t("delete.deleteRow"),this.$t("delete.prompt"),{distinguishCancelAndClose:!0,type:"warning",confirmButtonText:this.$t("common.delete"),cancelButtonText:this.$t("common.cancel")}).then(function(){t.$http.post(t.netAPI.delete,a).then(function(e){200==e.data.status?(a.length==t.tableData.length?(t.currentPage=t.currentPage-1>0?t.currentPage-1:1,t.searchtabledata("tabClick")):t.searchtabledata("tabClick"),t.$message.success(t.$t("delete.success")),t.$refs.table.clearSelection()):t.$message.warning(e.body.message)},function(e){t.$message({message:t.$t("common.serviceError")+e,type:"warning"})})}).catch(function(){t.$message({type:"info",message:t.$t("delete.canceledDeletion")})})}else this.$message({message:this.$t("delete.choose"),type:"warning"})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"alarmLog-page"},[a("separator"),e._v(" "),a("div",{staticClass:"alarmLog-content"},[a("div",{staticClass:"operation-panel"},[a("i",{staticClass:"blue"}),e._v(" "),a("div",{staticClass:"title"},[a("span",[e._v(e._s(e.$t("alarmCenter.mainTitle")))])]),e._v(" "),a("div",{staticClass:"tab-toggle"},[a("div",{class:{active:e.tabel}},[a("span",{staticStyle:{cursor:"pointer"},on:{click:function(t){e.end_warning(1)}}},[e._v(e._s(e.$t("alarmCenter.platform")))])]),e._v(" "),a("div",{class:{active:!e.tabel}},[a("span",{staticStyle:{cursor:"pointer"},on:{click:function(t){e.end_warning(0)}}},[e._v(e._s(e.$t("alarmCenter.device")))])])]),e._v(" "),a("div",{staticClass:"alarmLog-page-search"},[e._l(e.searchconfig,function(t,n){return["select"==t.type?a("el-select",{key:n,staticClass:"mini-input",style:{width:t.width+"px"},attrs:{clearable:"",placeholder:t.name},model:{value:e.searchobj[t.property],callback:function(a){e.$set(e.searchobj,t.property,a)},expression:"searchobj[se.property]"}},e._l(t.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})):e._e(),e._v(" "),"input"==t.type?a("el-input",{key:n,staticClass:"mini-input",style:{width:t.width+"px"},attrs:{placeholder:t.name},model:{value:e.searchobj[t.property],callback:function(a){e.$set(e.searchobj,t.property,a)},expression:"searchobj[se.property]"}}):e._e(),e._v(" "),"date"==t.type?a("el-date-picker",{key:n,staticClass:"picker",attrs:{type:"daterange","range-separator":e.$t("alarmCenter.to"),"start-placeholder":e.$t("alarmCenter.startDate"),"end-placeholder":e.$t("alarmCenter.endDate")},model:{value:e.searchobj[t.property],callback:function(a){e.$set(e.searchobj,t.property,a)},expression:"searchobj[se.property]"}}):e._e()]}),e._v(" "),a("el-button",{staticClass:"search-button",attrs:{type:"primary"},on:{click:function(t){e.searchtabledata("tabClick","search")}}},[e._v(e._s(e.$t("alarmCenter.search")))])],2),e._v(" "),a("el-button",{ref:"batchremove",staticClass:"delete-button",attrs:{disabled:e.batchdisabled},on:{click:function(t){e.deleteRow(e.multipleSelection)}}},[e._v("\n            "+e._s(e.$t("common.batchRemove"))+"\n        ")])],1),e._v(" "),a("div",{ref:"tableBox",staticClass:"table-box"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableBoxLoading,expression:"tableBoxLoading"}],ref:"table",staticClass:"table",attrs:{data:e.tableData,"header-cell-style":{background:"rgba(245,248,252,1)"},height:"500","default-sort":{prop:"id",order:"ascending"},"row-key":e.getRowKeys,selectable:e.filterselectable},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{fixed:"",type:"selection",width:"55","reserve-selection":""}}),e._v(" "),a("el-table-column",{attrs:{type:"index",width:"80",label:e.$t("alarmCenter.index"),align:"center"}}),e._v(" "),e._l(e.tableConfig,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.property,label:e.name,"min-width":e.width,align:"center"}})}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("alarmCenter.operation"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.deleteRow(t.row)}}},[e._v(e._s(e.$t("common.delete")))])]}}])})],2),e._v(" "),a("div",{staticClass:"pagination-box"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])],1)},staticRenderFns:[]};var c=a("VU/8")(l,o,!1,function(e){a("G+27")},"data-v-9840eb78",null);t.default=c.exports}});
//# sourceMappingURL=26.f9dcb8c11ea09273dd3a.js.map