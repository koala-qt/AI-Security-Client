webpackJsonp([37],{"9qS3":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("4syG"),l=a("2hMI"),r={name:"menu_manage",components:{separator:o.a},data:function(){return{createfrom:{parentCode:"",name:"",menuCode:"",perms:"",type:"",icon:"",orderNum:""},rules:{orderNum:[{type:"number",message:"排序必须为数字值",trigger:"blur"}]},updatefrom:{id:"",code:"",parentCode:"",parentName:"",name:"",menuCode:"",perms:"",type:"",icon:"",orderNum:""},typelable:[0,1,2],typeoption:[{value:0,label:"目录"},{value:1,label:"菜单"},{value:2,label:"按钮"}],updateoption:[{value:0,label:"目录"},{value:1,label:"菜单"},{value:2,label:"按钮"}],tableData:[],pageSize:10,currentPage:1,total:0,socperow:{id:"",code:"",parentCode:"",parentName:"",name:"",menuCode:"",perms:"",type:"",icon:"",orderNum:""},adddialogVisible:!1,updatedialogVisible:!1}},created:function(){var e=this;this.netAPI=Object(l.a)().get("menu_allocation"),this.$http.get(this.netAPI.find,{params:{pageNo:this.currentPage,pageSize:this.pageSize}}).then(function(t){200==t.body.status&&(e.total=t.body.total,e.tableData=t.body.data)},function(e){})},methods:{createFileHandleClose:function(){this.adddialogVisible=!1,this.$refs.createfrom.resetFields()},updateFileHandleClose:function(){this.updatedialogVisible=!1,this.$refs.updatefrom.resetFields()},cancelcreatedialogVisible:function(){this.$refs.createfrom.resetFields(),this.adddialogVisible=!1},cancelupdatedialogVisible:function(){this.$refs.updatefrom.resetFields(),this.updatedialogVisible=!1,this.getDataList()},addopen:function(e){this.socperow=e,this.adddialogVisible=!0},updateopen:function(e){this.updatefrom=e,console.log(this.updatefrom),this.updatedialogVisible=!0},adddDataFrom:function(){this.socperow.type=null,this.socperow.code="1003",this.socperow.name="菜单根节点",this.adddialogVisible=!0},handleSizeChange:function(e){this.pageSize=e,this.getDataList()},handleCurrentChange:function(e){this.currentPage=e,this.getDataList()},updateFrom:function(){var e=this;this.$http.post(this.netAPI.update,this.updatefrom).then(function(t){e.$refs.updatefrom.resetFields(),e.updatedialogVisible=!1,200==t.body.status?e.getDataList():e.$message.warning("服务错误"+t.body.message)},function(t){e.$message({message:"服务错误"+t,type:"warning"})})},createdFrom:function(e){var t=this;this.$http.post(this.netAPI.add,this.createfrom).then(function(e){t.$refs.createfrom.resetFields(),t.adddialogVisible=!1,200==e.body.status?t.getDataList():t.$message.warning("服务错误"+e.body.message)},function(e){t.$message({message:"服务错误"+e,type:"warning"})})},deleteopen:function(e){var t=this;this.$confirm("是否删除该菜单?","删除菜单",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http.get(t.netAPI.delete,{params:{id:e.id}}).then(function(e){200==e.body.status?t.getDataList():t.$message.warning("服务错误"+e.body.message)},function(e){t.$message({message:"服务错误"+e,type:"warning"})})}).catch(function(){t.$message({type:"info",message:"已取消操作"})})},getDataList:function(){var e=this;this.$http.get(this.netAPI.find,{params:{pageSize:this.pageSize,pageNo:this.currentPage}}).then(function(t){200==t.body.status&&(e.tableData=t.body.data,e.total=t.body.total)},function(e){})}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("separator"),e._v(" "),a("div",[a("el-button",{attrs:{type:"primary"},on:{click:e.adddDataFrom}},[e._v("新增")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"菜单名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"code",label:"编码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"menuCode",label:"菜单编码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"parentName",label:"父级菜单"}}),e._v(" "),a("el-table-column",{attrs:{prop:"perms",label:"权限注解"}}),e._v(" "),a("el-table-column",{attrs:{label:"类型",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.type?a("el-button",{attrs:{type:"text",size:"small"}},[e._v("目录")]):e._e(),e._v(" "),1==t.row.type?a("el-button",{attrs:{type:"text",size:"small"}},[e._v("菜单")]):e._e(),e._v(" "),2==t.row.type?a("el-button",{attrs:{type:"text",size:"small"}},[e._v("按钮")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"icon",label:"图标"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderNum",label:"排序"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.updateopen(t.row)}}},[e._v("编辑")]),e._v(" "),"1003"!=t.row.code?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.deleteopen(t.row)}}},[e._v("删除")]):e._e(),e._v(" "),2!=t.row.type?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.addopen(t.row)}}},[e._v("新增\n        ")]):e._e()]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{layout:"total,sizes,prev, pager, next",total:e.total,"page-size":e.pageSize,"page-sizes":[5,10,20],"current-page":e.currentPage},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"新增菜单",visible:e.adddialogVisible,width:"30%","before-close":e.createFileHandleClose},on:{"update:visible":function(t){e.adddialogVisible=t}}},[a("el-form",{ref:"createfrom",attrs:{model:e.createfrom,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.createfrom.name,callback:function(t){e.$set(e.createfrom,"name",t)},expression:"createfrom.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"菜单编码",prop:"menuCode"}},[a("el-input",{model:{value:e.createfrom.menuCode,callback:function(t){e.$set(e.createfrom,"menuCode",t)},expression:"createfrom.menuCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"权限注解",prop:"perms"}},[a("el-input",{model:{value:e.createfrom.perms,callback:function(t){e.$set(e.createfrom,"perms",t)},expression:"createfrom.perms"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图标",prop:"icon"}},[a("el-input",{model:{value:e.createfrom.icon,callback:function(t){e.$set(e.createfrom,"icon",t)},expression:"createfrom.icon"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序",prop:"orderNum"}},[a("el-input",{model:{value:e.createfrom.orderNum,callback:function(t){e.$set(e.createfrom,"orderNum",t)},expression:"createfrom.orderNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"type"}},[0==e.socperow.type?a("el-select",{model:{value:e.createfrom.type=e.typeoption[1].value,callback:function(t){e.$set(e.createfrom.type=e.typeoption[1],"value",t)},expression:"createfrom.type = typeoption[1].value"}},[a("el-option",{key:e.typeoption[1].value,attrs:{label:e.typeoption[1].label,value:e.typeoption[1].value}})],1):e._e(),e._v(" "),1==e.socperow.type?a("el-select",{model:{value:e.createfrom.type=e.typeoption[2].value,callback:function(t){e.$set(e.createfrom.type=e.typeoption[2],"value",t)},expression:"createfrom.type = typeoption[2].value"}},[a("el-option",{key:e.typeoption[2].value,attrs:{label:e.typeoption[2].label,value:e.typeoption[2].value}})],1):e._e(),e._v(" "),null==e.socperow.type?a("el-select",{model:{value:e.createfrom.type=e.typeoption[0].value,callback:function(t){e.$set(e.createfrom.type=e.typeoption[0],"value",t)},expression:"createfrom.type = typeoption[0].value"}},[a("el-option",{key:e.typeoption[0].value,attrs:{label:e.typeoption[0].label,value:e.typeoption[0].value}})],1):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"上级菜单",prop:"parentCode"}},[a("el-select",{model:{value:e.createfrom.parentCode=e.socperow.code,callback:function(t){e.$set(e.createfrom.parentCode=e.socperow,"code",t)},expression:"createfrom.parentCode = socperow.code"}},[a("el-option",{key:e.socperow.code,attrs:{label:e.socperow.name,value:e.socperow.code}})],1)],1),e._v(" "),a("el-form-item",{staticClass:"sub"},[a("el-button",{attrs:{type:"primary"},on:{click:e.cancelcreatedialogVisible}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.createdFrom("createfrom")}}},[e._v("确 定")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑菜单",visible:e.updatedialogVisible,width:"30%","before-close":e.updateFileHandleClose},on:{"update:visible":function(t){e.updatedialogVisible=t}}},[a("el-form",{ref:"updatefrom",attrs:{model:e.updatefrom,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.updatefrom.name,callback:function(t){e.$set(e.updatefrom,"name",t)},expression:"updatefrom.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"菜单编码",prop:"menuCode"}},[a("el-input",{model:{value:e.updatefrom.menuCode,callback:function(t){e.$set(e.updatefrom,"menuCode",t)},expression:"updatefrom.menuCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"权限注解",prop:"perms"}},[a("el-input",{model:{value:e.updatefrom.perms,callback:function(t){e.$set(e.updatefrom,"perms",t)},expression:"updatefrom.perms"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图标",prop:"icon"}},[a("el-input",{model:{value:e.updatefrom.icon,callback:function(t){e.$set(e.updatefrom,"icon",t)},expression:"updatefrom.icon"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序",prop:"orderNum"}},[a("el-input",{model:{value:e.updatefrom.orderNum,callback:function(t){e.$set(e.updatefrom,"orderNum",t)},expression:"updatefrom.orderNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"type"}},[0==e.updatefrom.type?a("el-input",{attrs:{placeholder:"目录",disabled:!0}}):e._e(),e._v(" "),1==e.updatefrom.type?a("el-input",{attrs:{placeholder:"菜单",disabled:!0}}):e._e(),e._v(" "),2==e.updatefrom.type?a("el-input",{attrs:{placeholder:"按钮",disabled:!0}}):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"上级菜单",prop:"parentCode"}},[a("el-input",{attrs:{placeholder:e.updatefrom.parentName,"aria-disabled":!0}})],1),e._v(" "),a("el-form-item",{staticClass:"sub"},[a("el-button",{attrs:{type:"primary"},on:{click:e.cancelupdatedialogVisible}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.updateFrom}},[e._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var n=a("VU/8")(r,i,!1,function(e){a("Dvv9")},"data-v-34b859c5",null);t.default=n.exports},Dvv9:function(e,t){}});
//# sourceMappingURL=37.cc85044fe5e8f223faf1.js.map