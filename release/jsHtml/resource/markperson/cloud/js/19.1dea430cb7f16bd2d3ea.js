webpackJsonp([19],{V7GK:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("mvHQ"),o=a.n(s),r=a("2hMI"),i=a("cW7S"),n=a("ojJb"),l=a.n(n),c={data:function(){return{carousels:[],checkedRemember:!1,loadForget:!1,staticImgUrl:l.a.loginImages[0],language:localStorage.language,form:{username:"",password:""},rules:{username:[{required:!0,message:this.$t("login.pleaseEnterAcc"),trigger:"blur"},{min:3,max:40,message:this.$t("login.length1"),trigger:"blur"}],password:[{required:!0,message:this.$t("login.pleaseEnterPass"),trigger:"blur"},{min:1,max:40,message:this.$t("login.length2"),trigger:"blur"}]},netApi:null,roleArr:[]}},beforeCreate:function(){localStorage.language="en","en"===localStorage.language?this.$i18n.locale="en":"zh"===localStorage.language&&(this.$i18n.locale="zh")},created:function(){this.netApi=Object(r.a)().get("login"),this.netAPIRole=Object(r.a)().get("role_manage");var e={password:localStorage.getItem("password"),username:localStorage.getItem("username")};e.username&&(this.form=e,this.checkedRemember=!0),this.carousels=["https://ss0.bdstatic.com/94oJfD_bAAcT8t7mm9GUKT-xh_/timg?image&quality=100&size=b4000_4000&sec=1534304755&di=ee3dd6abbe30f6c9d60e3e555782bbc4&src=http://a.hiphotos.baidu.com/zhidao/pic/item/cf1b9d16fdfaaf51b3fef0a6805494eef01f7a8d.jpg","https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=759961887,190875110&fm=27&gp=0.jpg","https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1534314836898&di=a563d0ca81d3a8c7ab077f1a11fd2975&imgtype=0&src=http%3A%2F%2Fup.enterdesk.com%2Fedpic_source%2F3a%2F68%2Fff%2F3a68ff27363e1b289f69628c7b7f0e0f.jpg"]},methods:{changelanguage:function(e){window.location.reload(),localStorage.language=e},login:function(){var e=this;this.$refs.loginForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.sendLogin()})},sendLogin:function(){var e=this;console.log(this.netApi.login),this.$http.post(this.netApi.login,this.form).then(function(t){200==t.body.status?(e.checkedRemember?(localStorage.setItem("username",e.form.username),localStorage.setItem("password",e.form.password)):(localStorage.removeItem("username"),localStorage.removeItem("password")),localStorage.setItem("userActive",e.form.username),localStorage.setItem("token",t.body.data.token),localStorage.setItem("role",t.body.data.roleName[0]),e.loadRouter()):e.$message({message:t.body.message,type:"warning"})},function(t){e.$message({message:e.$t("common.serviceError")+t,type:"warning"})})},loadRouter:function(){var e=this;this.$http.get(this.$api().get("jurisdiction").userMenu).then(function(t){200==t.body.status&&(e.$router.options.routes[1].redirect={name:"工作台"},console.log(t.body.data),e.$router.options.routes[1].children=Object(i.a)(t.body.data),e.$router.addRoutes(e.$router.options.routes),e.$router.push("/workbench/workbench"),localStorage.setItem("route",o()(t.body.data)))})},forgetPassword:function(){var e=this;this.form.username?this.$http.post(this.netApi.findPass,{username:this.form.username}).then(function(t){200==t.body.status?(e.$notify({title:"邮件发送提醒",message:"已给【"+e.form.username+"】用户的邮箱发送邮件，请注意查收！",type:"success"}),e.loadForget=!0,setTimeout(function(){e.loadForget=!1},1e4)):e.$message({message:t.body.message,type:"warning"})},function(e){}):this.$message({message:"先输入账号才能发送给指定邮箱！",type:"warning"})}}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login_page"},[a("div",{staticClass:"header"},[a("div",{staticClass:"header-left"},[a("div",[a("img",{attrs:{src:e.staticImgUrl.logo,alt:""}})])]),e._v(" "),a("div",{staticClass:"header-right"},[a("span",{staticStyle:{"margin-left":"30px","font-size":"12px",color:"#252C35"}},[e._v(e._s(e.$t("login.homePage")))])])]),e._v(" "),a("div",{staticClass:"main"},[a("div",{staticClass:"login_box"},[a("div",{staticClass:"login-title"},[a("label",[e._v(e._s(e.$t("login.accountSub")))])]),e._v(" "),a("div",{staticClass:"login-body"},[a("el-form",{ref:"loginForm",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{"label-width":"0",prop:"username"}},[a("el-input",{attrs:{placeholder:e.$t("login.pleaseEnterAcc"),clearable:""},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),a("el-form-item",{attrs:{"label-width":"0",prop:"password"}},[a("el-input",{attrs:{placeholder:e.$t("login.pleaseEnterPass"),type:"password",clearable:""},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.login(t):null}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"login-footer"},[a("div",{staticStyle:{width:"100%"}},[a("el-button",{staticClass:"enter",staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:e.login}},[e._v("\n                "+e._s(e.$t("login.submit"))+"\n              ")])],1)])])]),e._v(" "),e._m(0)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"footer"},[t("div")])}]};var m=a("VU/8")(c,g,!1,function(e){a("gUQK"),a("maW4")},"data-v-2b07f3fd",null);t.default=m.exports},gUQK:function(e,t){},maW4:function(e,t){}});
//# sourceMappingURL=19.1dea430cb7f16bd2d3ea.js.map