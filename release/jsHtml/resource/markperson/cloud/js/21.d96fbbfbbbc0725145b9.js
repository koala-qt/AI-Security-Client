webpackJsonp([21],{EbDF:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("2hMI"),a={name:"monitoringLogin",data:function(){return{netApi:null,language:"语言",checkedRemember:!1,loadForget:!1,form:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:40,message:"长度在 3 到 40 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:1,max:40,message:"长度在 1 到 40 个字符",trigger:"blur"}]}}},created:function(){this.netApi=Object(r.a)().get("login");var e={password:localStorage.getItem("password"),username:localStorage.getItem("username")};e.username&&(this.form=e,this.checkedRemember=!0)},methods:{login:function(){var e=this;this.$refs.loginForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.sendLogin()})},sendLogin:function(){var e=this;this.$http.post(this.netApi.login,this.form).then(function(t){200==t.body.status?(console.log(t.body.data),e.checkedRemember?(localStorage.setItem("username",e.form.username),localStorage.setItem("password",e.form.password)):(localStorage.removeItem("username"),localStorage.removeItem("password")),localStorage.setItem("userActive",e.form.username),localStorage.setItem("token",t.body.data.token),localStorage.setItem("role",t.body.data.roleName[0]),e.$router.push("/monitoringSystem/monitoring_system/monitoringRecord")):e.$message({message:t.body.message,type:"warning"})},function(t){e.$message({message:"服务错误"+t,type:"warning"})})},loadRouter:function(){},forgetPassword:function(){var e=this;this.form.username?this.$http.post(this.netApi.findPass,{username:this.form.username}).then(function(t){200==t.body.status?(e.$notify({title:"邮件发送提醒",message:"已给【"+e.form.username+"】用户的邮箱发送邮件，请注意查收！",type:"success"}),e.loadForget=!0,setTimeout(function(){e.loadForget=!1},1e4)):e.$message({message:t.body.message,type:"warning"})},function(t){e.$message.warning(t)}):this.$message({message:"先输入账号才能发送给指定邮箱！",type:"warning"})}}},o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"monitorlogin_page"},[s("div",{staticClass:"main"},[e._m(0),e._v(" "),s("div",{staticClass:"login-box"},[e._m(1),e._v(" "),s("div",{staticClass:"login-body"},[s("el-form",{ref:"loginForm",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[s("el-form-item",{attrs:{"label-width":"0",prop:"username"}},[s("el-input",{attrs:{placeholder:"请输入账号",clearable:""},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),s("el-form-item",{attrs:{"label-width":"0",prop:"password"}},[s("el-input",{attrs:{placeholder:"请输入密码",type:"password",clearable:""},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.login(t):null}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1)],1),e._v(" "),s("div",{staticClass:"login-footer"},[s("div",{staticStyle:{width:"100%"}},[s("el-button",{staticClass:"enter",staticStyle:{width:"100%",height:"45px",background:"#2856A1","margin-bottom":"10px"},attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")])],1)])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"banner-box"},[t("img",{attrs:{src:"/static/img/monitoringLogin/loginlog.png",alt:""}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"login-title"},[t("label",[this._v("登陆系统管理")])])}]};var n=s("VU/8")(a,o,!1,function(e){s("gfCY"),s("Lcay")},"data-v-030a17cc",null);t.default=n.exports},Lcay:function(e,t){},gfCY:function(e,t){}});
//# sourceMappingURL=21.d96fbbfbbbc0725145b9.js.map