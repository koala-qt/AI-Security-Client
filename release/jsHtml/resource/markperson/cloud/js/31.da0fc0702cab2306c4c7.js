webpackJsonp([31],{"3Ugx":function(e,t){},e0WK:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("2hMI"),i={data:function(){return{detailsDialog:!1,pickerOptions2:{shortcuts:[{text:this.$t("accessSystem.zuijinyizhou"),onClick:function(e){var t=new Date,s=new Date;s.setTime(s.getTime()-6048e5),e.$emit("pick",[s,t])}},{text:this.$t("accessSystem.zuijinyigeyue"),onClick:function(e){var t=new Date,s=new Date;s.setTime(s.getTime()-2592e6),e.$emit("pick",[s,t])}},{text:this.$t("accessSystem.zuijinsangeyue"),onClick:function(e){var t=new Date,s=new Date;s.setTime(s.getTime()-7776e6),e.$emit("pick",[s,t])}}]},value:"",value5:"",certainTime:"",dateTime:"",tableData:[],alertData:[],typeList:[],searchType:"",deviceAddress:"",alertIds:[],multipleSelection:[],pageSize:5,total:1,pageNumber:1,detailInfo:{},getRowKeys:function(e){return e.id}}},created:function(){Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var s in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+s+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[s]:("00"+t[s]).substr((""+t[s]).length)));return e},this.dateTime=[(new Date).Format("yyyy-MM-dd 00:00:00"),(new Date).Format("yyyy-MM-dd 23:59:59")],console.log(this.dateTime),this.netAPI=Object(a.a)().get("accessSystem"),this.getAlertList(),this.getAlertType()},methods:{getAlertDetail:function(e){var t=this;this.detailsDialog=!0,this.detailInfo=e,"黑名单闯入告警"==e.type&&(console.log("查询人员"),this.$http.get(this.netAPI.alert.peopleDetail,{params:{id:e.person.id}}).then(function(e){200==e.body.status?(console.log(e.body.data.code,e.body.data.name),t.$set(t.detailInfo,"code",e.body.data.code),t.$set(t.detailInfo,"personName",e.body.data.name),t.$set(t.detailInfo,"urls",e.body.data.urls[0]),t.$set(t.detailInfo,"code",e.body.data.code),console.log(t.detailInfo)):t.$message.error(e.body.message)})),console.log(this.detailInfo)},detailsDialogClose:function(){this.detailInfo={},this.detailsDialog=!1},handleSizeChange:function(e){this.pagesize=e,this.getAlertList()},handleCurrentChange:function(e){this.pageNumber=e,this.getAlertList()},handleSelectionChange:function(e){console.log(e),e.length?this.multipleSelection=e:this.multipleSelection=[]},deleteAlert:function(e){var t=this;if(!e.id&&this.multipleSelection.length<1)this.$message.warning(this.$t("accessSystem.qingxuanzeshanchuxiang"));else{if(e.id)this.alertIds=[{id:e.id}];else for(var s in this.multipleSelection)if(this.multipleSelection.hasOwnProperty(s)){var a=this.multipleSelection[s];this.alertIds.push({id:a.id})}console.log(this.alertIds),this.$http.post(this.netAPI.alert.alertRemove,this.alertIds).then(function(e){200==e.body.status?(t.$message.success(t.$t("accessSystem.shanchuchenggong")),1==t.alertData.length&&(t.pageNumber=t.pageNumber-1>0?t.pageNumber-1:1),t.getAlertList()):t.$message.error(e.body.message)})}},getAlertType:function(){var e=this;this.$http.get(this.netAPI.alert.alertType).then(function(t){200==t.body.status?e.typeList=t.body.data:e.$message.error(t.body.message)})},consolechange:function(){console.log(this.dateTime)},getAlertList:function(){var e=this;if(null==this.dateTime)var t={types:this.searchType,address:this.deviceAddress,pageNo:this.pageNumber,pageSize:this.pageSize,sort:"id",order:"asc"};else t={startTime:this.dateTime[0],endTime:this.dateTime[1],types:this.searchType,address:this.deviceAddress,pageNo:this.pageNumber,pageSize:this.pageSize,sort:"id",order:"asc"};this.$http.get(this.netAPI.alert.alertList,{params:t}).then(function(t){200==t.body.status?(e.alertData=t.body.data,e.total=t.body.total):e.$message.error(t.body.message)})}}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"passRules"}},[s("div",{staticClass:"contantHeader"},[s("span",{staticClass:"title"},[e._v(e._s(e.$t("accessSystem.gaojing")))]),e._v(" "),s("span",{staticStyle:{"font-size":"14px","margin-left":"1.7rem"}},[e._v(e._s(e.$t("accessSystem.gaojingshijian"))+"：")]),e._v(" "),s("el-date-picker",{attrs:{type:"datetimerange",align:"right","unlink-panels":"",clearable:!1,"start-placeholder":e.$t("accessSystem.kaishiriqi"),"end-placeholder":e.$t("accessSystem.jieshuriqi"),"default-time":["12:00:00","08:00:00"],"value-format":"yyyy-MM-dd HH:mm:ss"},on:{change:e.consolechange},model:{value:e.dateTime,callback:function(t){e.dateTime=t},expression:"dateTime"}}),e._v(" "),s("span",{staticStyle:{"font-size":"14px","margin-left":"0.32rem"}},[e._v(e._s(e.$t("accessSystem.gaojingleixing"))+"：")]),e._v(" "),s("el-select",{attrs:{placeholder:e.$t("accessSystem.qingxuanze"),clearable:""},model:{value:e.searchType,callback:function(t){e.searchType=t},expression:"searchType"}},e._l(e.typeList,function(e){return s("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})})),e._v(" "),s("el-input",{attrs:{placeholder:e.$t("accessSystem.qingshurugaojingdidian"),clearable:"",width:"100px",maxlength:"20"},model:{value:e.deviceAddress,callback:function(t){e.deviceAddress=t},expression:"deviceAddress"}}),e._v(" "),s("el-button",{staticClass:"btn",attrs:{round:"",type:"primary"},on:{click:e.getAlertList}},[e._v(e._s(e.$t("accessSystem.chaxun")))]),e._v(" "),s("el-button",{attrs:{round:""},on:{click:e.deleteAlert}},[e._v(e._s(e.$t("accessSystem.piliangshanchu")))])],1),e._v(" "),s("el-dialog",{attrs:{title:e.$t("accessSystem.xiangqing"),visible:e.detailsDialog,width:"35%","before-close":e.detailsDialogClose},on:{"update:visible":function(t){e.detailsDialog=t}}},[s("el-row",["陌生人闯入告警"!=e.detailInfo.type?s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-contentFir"},[s("img",{staticClass:"snapduibi",attrs:{src:e.detailInfo.urls,alt:"暂无"}})])]):e._e(),e._v(" "),"陌生人闯入告警"!=e.detailInfo.type?s("el-col",{staticStyle:{"margin-top":"100px"},attrs:{span:8}},[s("div",{staticClass:"grid-contentFir"},[s("span",{staticClass:"score"},[e._v(e._s(100*e.detailInfo.score+"%"))])])]):e._e(),e._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-contentFir"},[s("img",{staticClass:"snapduibi",attrs:{src:e.detailInfo.url,alt:"暂无"}})])])],1),e._v(" "),s("el-row",[s("div",{staticClass:"grid-contentSec"},[e._v(e._s(e.$t("accessSystem.gaojingleixing"))+":"),s("label",{staticClass:"value"},[e._v(e._s(e.detailInfo.type))])]),e._v(" "),"陌生人闯入告警"!=e.detailInfo.type?s("div",{staticClass:"grid-contentSec"},[e._v(e._s(e.$t("accessSystem.xingming"))+":"),s("label",{staticClass:"value"},[e._v(e._s(e.detailInfo.personName))])]):e._e(),e._v(" "),"陌生人闯入告警"!=e.detailInfo.type?s("div",{staticClass:"grid-contentSec"},[e._v(e._s(e.$t("accessSystem.shenfenzhenghao"))+":"),s("label",{staticClass:"value"},[e._v(e._s(e.detailInfo.code))])]):e._e(),e._v(" "),s("div",{staticClass:"grid-contentSec"},[e._v(e._s(e.$t("accessSystem.shijian"))+":"),s("label",{staticClass:"value"},[e._v(e._s(e.detailInfo.time))])]),e._v(" "),s("div",{staticClass:"grid-contentSec"},[e._v(e._s(e.$t("accessSystem.weizhi"))+":"),s("label",{staticClass:"value"},[e._v(e._s(e.detailInfo.address))])])]),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.detailsDialog=!1}}},[e._v(e._s(e.$t("accessSystem.guanbi")))])],1)],1),e._v(" "),s("div",{staticClass:"contantTable"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.alertData,"row-key":e.getRowKeys},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"55","reserve-selection":!0}}),e._v(" "),s("el-table-column",{attrs:{prop:"id",label:e.$t("accessSystem.xuhao")}}),e._v(" "),s("el-table-column",{attrs:{prop:"type",label:e.$t("accessSystem.gaojingleixing")}}),e._v(" "),s("el-table-column",{attrs:{prop:"time",label:e.$t("accessSystem.gaojingshijian")}}),e._v(" "),s("el-table-column",{attrs:{prop:"address",label:e.$t("accessSystem.gaojingdidian")}}),e._v(" "),s("el-table-column",{attrs:{label:e.$t("accessSystem.zhuapaizhaopian")},scopedSlots:e._u([{key:"default",fn:function(e){return[s("img",{attrs:{src:e.row.url,alt:""}})]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"person.name",label:e.$t("accessSystem.xingming")}}),e._v(" "),s("el-table-column",{attrs:{label:e.$t("accessSystem.caozuo")},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(s){e.getAlertDetail(t.row)}}},[e._v(e._s(e.$t("accessSystem.xiangqing")))]),e._v(" "),s("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(s){e.deleteAlert(t.row)}}},[e._v(e._s(e.$t("accessSystem.shanchu")))])]}}])})],1),e._v(" "),s("el-pagination",{staticClass:"pagination",attrs:{"current-page":e.pageNumber,"page-sizes":[5,10,20,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var n=s("VU/8")(i,l,!1,function(e){s("3Ugx")},"data-v-5a01e104",null);t.default=n.exports}});
//# sourceMappingURL=31.da0fc0702cab2306c4c7.js.map