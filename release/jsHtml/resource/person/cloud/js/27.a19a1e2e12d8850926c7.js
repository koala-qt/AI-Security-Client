webpackJsonp([27],{"0Cng":function(e,t){},WuO6:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("4syG"),r=a("2hMI"),o=a("C6kd"),n={components:{separator:i.a},data:function(){return{viewDialogVisible:!1,createDialogVisible:!1,searchFrom:{deviceGroupName:""},createFormRules:{},createForm:{},tableDataLabel:"",netAPI:"",tableData:[],currentPage:1,pageSize:10,total:0}},created:function(){this.tableDataLabel=o.a.get("device_group"),this.netAPI=Object(r.a)().get("device_group"),this.getData()},methods:{getData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pageSize:this.pageSize,pageNo:this.currentPage};for(var a in this.searchFrom)t.deviceGroupName=this.searchFrom[a];this.$http.get(this.netAPI.find,{params:t}).then(function(t){e.tableData=t.body.data,e.total=t.body.total})},submitForm:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return t.$message.error("请填写必填信息"),!1;switch(e){case"createForm":var i={deviceGroupName:t.createForm.name};t.$http.post(t.netAPI.insert,i).then(function(e){200==e.body.status&&(t.getData(),t.$message({message:"创建成功",type:"success"}),t.createDialogFun())});break;case"editForm":t.editFormFun()}})},searchForm:function(e){},view:function(e){for(var t in this.viewDialogVisible=!0,this.editForm)this.viewForm[t]=e[t]},viewDialogFun:function(){},remove:function(e){var t=this,a=[];if(e){if("[object Array]"==Object.prototype.toString.call(e))for(var i in e)a.push(e[i].id);else a.push({id:e.id});this.$confirm("确定要删除选中的行?","删除提示",{distinguishCancelAndClose:!0,confirmButtonText:"删除",cancelButtonText:"不删除"}).then(function(){t.$http.post(t.netAPI.delete,a).then(function(e){200==e.data.status&&(t.getData(),t.tableData=[])})})}else this.$message({message:"请选中要删除的行",type:"warning"})},createDialogFun:function(){this.nulltoForm(this.createForm,"createForm"),this.createDialogVisible=!1},editDialogFun:function(){this.nulltoForm(this.editForm,"editForm"),this.editDialogVisible=!1},nulltoForm:function(e,t){for(var a in e)e[a]="";this.$refs[t].resetFields()},handleSizeChange:function(e){this.pageSize=e,this.getData({pageSize:this.pageSize,pageNo:this.currentPage})},handleCurrentChange:function(e){this.currentPage=e,this.getData({pageSize:this.pageSize,pageNo:this.currentPage})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("separator"),e._v(" "),a("div",{staticClass:"page-content"},[a("div",[a("el-input",{staticClass:"mini-input",staticStyle:{width:"150px"},attrs:{placeholder:"设备组"},model:{value:e.searchFrom.deviceGroupName,callback:function(t){e.$set(e.searchFrom,"deviceGroupName",t)},expression:"searchFrom.deviceGroupName"}}),e._v(" "),a("el-button",{staticClass:"search-button",attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){e.getData()}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.createDialogVisible=!0}}},[e._v("创建新分组")])],1),e._v(" "),a("div",{ref:"tableBox",staticClass:"table-box"},[[a("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,"default-sort":{prop:"id",order:"ascending"}}},[a("el-table-column",{attrs:{fixed:"",type:"selection",width:"55"}}),e._v(" "),e._l(e.tableDataLabel,function(e,t){return a("el-table-column",{key:t,attrs:{sortable:"",prop:e.property,label:e.name,"min-width":e.width}})}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.view(t.row)}}},[e._v("\r\n                                查看\r\n                                ")]),e._v(" "),a("el-button",{staticClass:"del-btn",attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.remove(t.row)}}},[e._v("\r\n                                删除\r\n                                ")])]}}])})],2)]],2),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"新增",visible:e.createDialogVisible,width:"60%","before-close":e.createDialogFun},on:{"update:visible":function(t){e.createDialogVisible=t}}},[a("el-form",{ref:"createForm",staticClass:"demo-ruleForm",attrs:{model:e.createForm,"status-icon":"",rules:e.createFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"设备组名称",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.createForm.name,callback:function(t){e.$set(e.createForm,"name",t)},expression:"createForm.name"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(){e.createDialogVisible=!1,e.nulltoForm(e.createForm,"createForm")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("createForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"查看设备组设备",visible:e.viewDialogVisible,width:"60%","before-close":e.viewDialogFun},on:{"update:visible":function(t){e.viewDialogVisible=t}}})],1)],1)},staticRenderFns:[]};var l=a("VU/8")(n,s,!1,function(e){a("0Cng")},"data-v-918a9eb4",null);t.default=l.exports}});
//# sourceMappingURL=27.a19a1e2e12d8850926c7.js.map