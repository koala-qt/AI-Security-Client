<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>首页</title>
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />
    <style type="text/css">
        html {
            height: 100%
        }

        body {
            height: 100%;
            margin: 0px;
            padding: 0px
        }

        #container {
            height: 100%
        }

        #side {

            height: 100%;
            width: 30%;
            float: left;
            border-right: 1px solid black
        }
        .col{
            background-color: red;
            margin-left: 5px;
            margin-top: 40px;
        }
        .BMap_cpyCtrl {
            display: none;
        }
        .anchorBL {
            display: none;
        }
    </style>

    <script type="text/javascript" src="map_load.js"></script>
    <script type="text/javascript" src="TextIconOverlay_min.js"></script>
    <script type="text/javascript" src="MarkerClusterer_min.js"></script>
</head>

<body>
    <div id="side">
        <div class="row">
            <div class="col" onclick="getmarker(1)">
               餐厅
            </div>
            <div class="col" onclick="getmarker(2)">
                酒店
            </div>
            <div class="col"onclick="getmarker(3)">
                酒吧
            </div>
            <div class="col"onclick="getmarker(4)">
                    咖啡馆
                </div>
                
        </div>
    </div>
    <div id="container"></div>
    <script src="js/jquery-3.3.1.min.js"></script>


    <script src="js/bootstrap.js"></script>
    <script type="text/javascript">
    function getmarker(a){
        map.clearOverlays() 
        var markerArray = []
		var points = []
		for (var i = 0; i < 10; i++) {
			var a = new BMap.Point(54.534919+Math.random()*0.1, 24.345037+Math.random()*0.07 )
			var marker = new BMap.Marker(a);
			if(i<10){
				points.push(a)
			}
           
			// 创建标注
			markerArray.push(marker)
			// map.addOverlay(marker); // 将标注添加到地图中
			
			// marker.setLabel(label);
			// addClickHandler(content, marker);
		}
		var markerClusterer = new BMapLib.MarkerClusterer(map, {markers:markerArray});
        var allOverlay = map.getOverlays()
        console.log(allOverlay)
    }
        var outputPath = 'tiles/'; //地图瓦片所在的文件夹
        var fromat = ".jpg"; //格式

        /*var tileLayer = new BMap.TileLayer();
        tileLayer.getTilesUrl = function (tileCoord, zoom) {
        	var x = tileCoord.x;
        	var y = tileCoord.y;
        	var url = outputPath + zoom + '/' + x + '/' + y + fromat;
        	return url;
        }
        var tileMapType = new BMap.MapType('tileMapType', tileLayer);*/

        var map = new BMap.Map("container")

        // var point1 = new BMap.Point(54.56, 24.34); // 创建点坐标  
        // var point2 = new BMap.Point(54.55, 24.35); // 创建点坐标  
        // var point3 = new BMap.Point(54.53, 24.35); // 创建点坐标  
        map.centerAndZoom(new BMap.Point(54.534919, 24.345037), 18);
      

     

        // 创建标注对象并添加到地图   
        // var marker1 = new BMap.Marker(point1, {
        // 	icon: myIcon
        // });

        // for (var i = 0; i < data_info.length; i++) {
        // 	var marker = new BMap.Marker(new BMap.Point(data_info[i][0], data_info[i][1]), {
        // 		icon: myIcon
        // 	});
        // 	// 创建标注
        // 	var content = data_info[i][2];
        // 	map.addOverlay(marker); // 将标注添加到地图中
        // 	var label = new BMap.Label(data_info[i][3], {
        // 		offset: new BMap.Size(-40, 33)
        // 	});
        // 	marker.setLabel(label);
        // 	addClickHandler(content, marker);
        // }
        var markerArray = []
        var points = []
     
        var allOverlay = map.getOverlays()

       
        function addClickHandler(content, marker) {
            marker.addEventListener("click", function (e) {
                console.log(e)
                openInfo(content, e)
            });
        }

        function openInfo(content, e) {
            var p = e.target;
            var point = new BMap.Point(p.getPosition().lng, p.getPosition().lat);
            var infoWindow = new BMap.InfoWindow(content, opts); // 创建信息窗口对象 
            map.openInfoWindow(infoWindow, point); //开启信息窗口
        }
        // 创建标注    
        // map.addOverlay(marker1); // 初始化地图，设置中心点坐标和地图级别  

        //添加地图类型控件
        map.addControl(new BMap.MapTypeControl({
            mapTypes: [
                BMAP_NORMAL_MAP,

            ]
        }));


       
        map.enableScrollWheelZoom(true); //开启鼠标滚轮缩放
        //单击获取点击的经纬度
        // map.addEventListener("click", function (e) {
        // 	alert(e.point.lng + "," + e.point.lat);
        // });
    </script>
</body>

</html>